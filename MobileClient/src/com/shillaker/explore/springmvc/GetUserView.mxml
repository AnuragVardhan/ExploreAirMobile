<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" title="Get User">
	
	<fx:Script>
		<![CDATA[
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			private var connector:ServerConnector = ServerConnector.getInstance();
			
			[Bindable]
			private var results:XMLList;
			
			private function resultFunction(result:ResultEvent):void
			{
				resultLabel.text = "Result";
				var xml:XML = XML(result.result);
				
				resultLabel.text = xml.toString();
			}
			
			private function faultFunction(fault:FaultEvent):void
			{
				resultLabel.text = "Fault";
			}
			
			protected function sendButton_clickHandler(event:MouseEvent):void
			{
				connector.doServerConnectorCall(urlInput.text,
					resultFunction,
					faultFunction,
					connectMethodInput.text,
					null);
			}
			
		]]>
	</fx:Script>
	
	<s:navigationContent>
		<s:Button id="backButton" label="Back" 
				  visible="{navigator.length > 1}" includeInLayout="{navigator.length > 1}" 
				  click="navigator.popView()"/>
	</s:navigationContent>
	
	<s:layout>
		<s:VerticalLayout horizontalAlign="center" verticalAlign="middle"/>
	</s:layout>
	
	<s:Label text="Url:" />
	<s:TextInput id="urlInput" width="100%" text="users/1" />
	
	<s:Label text="Server connect method (GET/ POST etc.)" />
	<s:TextInput id="connectMethodInput" width="100%" text="GET"/>
	
	<s:Button id="sendButton" label="Send request" click="sendButton_clickHandler(event)"/>
	
	<s:Label id="resultLabel" width="100%"/>
	
</s:View>
