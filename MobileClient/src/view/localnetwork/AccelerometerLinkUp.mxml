<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" title="Accelerometer Link Up Test" 
		creationComplete="init()">
	
	<s:navigationContent>
		<s:Button id="backButton" label="&lt;-" 
				  visible="{navigator.length > 1}" includeInLayout="{navigator.length > 1}" 
				  click="navigator.popView()"/>
	</s:navigationContent>
	
	<s:layout>
		<s:VerticalLayout horizontalAlign="center"/>
	</s:layout>
	
	<fx:Script>
		<![CDATA[
			import flash.sensors.Accelerometer;
			
			import network.NetworkConnector;
			
			private var networkConnector:NetworkConnector = new NetworkConnector();
			
			private var accelerometer:Accelerometer = new Accelerometer();
			
			private function init():void
			{
				accelerometer.addEventListener(AccelerometerEvent.UPDATE, onAccelerometerChange);
			}
			
			private function onAccelerometerChange(event:AccelerometerEvent):void
			{
				networkConnector.sendMessage("" + Math.round(event.accelerationY*(-90)));
			}
			
		]]>
	</fx:Script>
	
	<s:Label text="Move phone to move arrow on other machines." />
	
</s:View>
